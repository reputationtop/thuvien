{% extends "library/layout.html" %}

{% block title %}login {% endblock %}
{% block body %}
    <h2 class="text-center">Những hoạt động gần đây</h2>  
    
    <div class="row text-center">


        <div class="row pb-4 container  col-md-3 col-sm-4">
            <div class=" isb_padding isb-container flex_img">
                <div class="col-md-6">
                    <img style="max-width: 350px;"  src="/library/media/{{users.avatar}}"  class="card-img-top" >
                </div>  
                <div>
                    
                    <strong>Tên : {{users.username}}</strong><br>
                    {% if user.is_superuser %}
                        <div class="card-text money" id="money{{ users.id }}" style="font-size: 0.9rem; margin-bottom: .5rem">Số dư : {{users.money}} <button style="float: right; font-size: small; padding: 4px 10px" data-userid="{{ users.id }}"class="btn edit-btn edit btn-sm btn-outline-primary">Nạp thêm tiền</button></div><br>
                    {% else %}
                        <strong>  Số dư : {{users.money}}</strong><br>
                    {% endif %}
                    <small>Truy cập núc :{{users.date_joined}}</small><br>
                </div>
            </div>
            <div class="row justify-content-center text-center">
                <button class="btn btn-sm btn-outline-primary" style="display: block;" id="find_i">Thông tin tài khoản</button>  
                <button class="btn btn-sm btn-outline-primary" style="display: none;" id="find_a"> thông tin tài khoản</button>  
                <button class="btn btn-sm btn-outline-primary" id="work_alls">Tất cả hoạt động</button>  
                <button class="btn btn-sm btn-outline-primary" id="work_coments">Bình luận </button>
                <button class="btn btn-sm btn-outline-primary" id="work_moneys">Biến động số dư</button>
                <button class="btn btn-sm btn-outline-primary" id="work_others ">các hoạt động khác</button>  
            </div>
        </div>

        <div class=" row align-items-center align-items-center col-md-9 col-sm-8">

            <div id="work_all" style="display: block;">
                <h4>Tất cả hoạt động</h4><br>
                <table>

                    {% for active in  all_active %}
                        {% if active.classify_active == 1 %}
                            <tr>
                                <td><a href="{% url 'book' active.item.id%}">{{active.item.namebook}}</a></td>
                                <td>{{active.time_2}}</td>
                                <td>{{active.coment_active.comment}}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}





                </table>          
            </div>
            <div id="work_coment" style="display: none;">
                <h4>Bình luận :</h4><br>
                <table>
                    <tr>
                        <th>Tên cuốn sách</th>
                        <th>Thời gian</th>
                        <th>Nội dung</th>
                    </tr>

                    {% for active in  all_active %}
                        {% if active.classify_active == 1 %}
                            <tr>
                                <td><a href="{% url 'book' item.id%}">{{active.item.namebook}}</a></td>
                                <td>{{active.time_2}}</td>
                                <td>{{active.reason}}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </table>
                <div class="col-10 col-md-8 col-lg-6 pt-2">
                </div>   
            </div>
            <div id="work_money" style="display: none;">
                <h4>Biến động số dư:</h4><br>
                <table>
                    <tr>
                        <th>Số tiền</th>
                        <th>Thời gian</th>
                        <th>Ghi chú</th>
                    </tr>
                    {% for active in  all_active %}
                        {% if active.classify_active == 2 %}

                            <tr>
                                <td>{{active.money}}</td>
                                <td>{{active.time_2}}</td>
                                <td>{{active.reason}}</td>
                            </tr>

                        {% endif %}
                    {% endfor %}
                </table>

        
            </div>

            <div id="work_other" style="display: none;">

                <h4>các hoạt động khác</h4><br>
                <table style="webkit-line-clamp: 1;">
                    <tr>
                        <th>người thực hiện</th>
                        <th>Thời gian</th>
                        <th>Ghi chú</th>
                    </tr>

                    {% for active in  all_active %}
                        {% if active.classify_active == 0 %}
                            <tr>
                                <td><a href="{% url 'book' active.item.id%}">{{active.item.namebook}}</a></td>
                                    <td>{{active.time_2}}</td>
                                    <td>{{active.reason}}</td>
                                </tr>
                            </tr>
                        {% endif %}
                    {% endfor %}

                </table>          
            </div>
        </div>
    </div>
    <script language="javascript">
    
        document.getElementById("find_a").onclick = function () {
            document.getElementById("find_a").style.display = 'none';
            document.getElementById("find_i").style.display = 'block';

        };

        document.getElementById("find_i").onclick = function () {
            document.getElementById("find_i").style.display = 'none';
            document.getElementById("find_a").style.display = 'block';


        };



        document.getElementById("work_alls").onclick = function () {
            document.getElementById("work_all").style.display = 'none';
            document.getElementById("work_coment").style.display = 'block';
            document.getElementById("work_money").style.display = 'block';
            document.getElementById("work_other").style.display = 'block';

            document.querySelector('#work_all').style.color = '#d93025';
            document.querySelector('#work_coment').style.color = '#5f6368';
            document.querySelector('#work_money').style.color = '#5f6368';
            document.querySelector('#work_other').style.color = '#5f6368';

        };

        document.getElementById("work_coment").onclick = function () {
            document.getElementById("work_coment").style.display = 'block';
            document.getElementById("work_money").style.display = 'none';
            document.getElementById("work_other").style.display = 'none';

            document.querySelector('#work_coment').style.color = '#d93025';
            document.querySelector('#work_all').style.color = '#5f6368';
            document.querySelector('#work_money').style.color = '#5f6368';
            document.querySelector('#work_other').style.color = '#5f6368';

        };

        document.getElementById("work_money").onclick = function () {
            document.getElementById("work_coment").style.display = 'none';
            document.getElementById("work_money").style.display = 'block';
            document.getElementById("work_other").style.display = 'none';

            document.querySelector('#work_money').style.color = '#d93025';
            document.querySelector('#work_coment').style.color = '#5f6368';
            document.querySelector('#work_all').style.color = '#5f6368';
            document.querySelector('#work_other').style.color = '#5f6368';

        };

        document.getElementById("work_other").onclick = function () {
            document.getElementById("work_coment").style.display = 'block';
            document.getElementById("work_money").style.display = 'none';
            document.getElementById("work_other").style.display = 'none';

            document.querySelector('#work_other').style.color = '#d93025';
            document.querySelector('#work_coment').style.color = '#5f6368';
            document.querySelector('#work_money').style.color = '#5f6368';
            document.querySelector('#work_all').style.color = '#5f6368';

        };

    </script>
{% endblock %}